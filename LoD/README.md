### 什么是迪米特法则

迪米特法则，又被称为“最少知道”法则。

是指，一个对象类对于其他对象类来说，知道得越少越好。

即，两个类之间不要有过多的耦合关系，应该保持最少关联性。

迪米特法则要求我们构建高内聚、低耦合的应用。

### 内聚

模块内部元素（函数/类/方法）为同一目标协作的紧密程度。

高内聚：厨师组专注烹饪，将摘菜、洗菜、切菜等环节交给其他组。

低内聚：一个厨师组负责餐厅全部工作，导致系统手忙脚乱。

代码映射：一个`UserService`类只处理用户逻辑（注册/登录/资料），而非混杂支付、日志等无关代码。

### 耦合

模块间依赖关系的强度与复杂度。

低耦合：在厨房中，灶台、冰箱、洗碗机等设备分开摆放，使用标准插头进行连接，需要更换设备时，直接更换对应设备即可，不需要更改其他设备。

高耦合：灶台、冰箱、洗碗机等一体化，灶台坏了，得把冰箱、洗碗机等全部拆开。

代码映射：订单服务通过标准API调用支付服务（低耦合）；若直接操作支付数据库表（高耦合），支付一改，订单全崩。

### 为什么要做到高内聚、低耦合

1. 需求改动重构量小。
2. 对于流量巨大应用可以进行单独扩容。
3. 团队协作能力提高。
4. 新人上手快（只需要看单一模块等文档）。

软件设计的核心，不是写代码，而是**管理复杂度**。