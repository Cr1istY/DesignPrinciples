<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘æœåŠ¡ç”¨æˆ·ç­‰çº§æ¨¡å—é‡æ„æŠ€æœ¯æ–‡æ¡£</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlightjs@11.8.0/lib/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlightjs@11.8.0/styles/github.min.css">
    <style>
        :root {
            --primary-color: #1890ff;
            --secondary-color: #52c41a;
            --warning-color: #faad14;
            --danger-color: #ff4d4f;
            --dark-color: #262626;
            --light-color: #fafafa;
            --gray-color: #8c8c8c;
            --border-color: #e8e8e8;
            --card-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            --header-bg: linear-gradient(135deg, #0a2540 0%, #1a3b5d 100%);
            --section-bg: #f8f9fa;
            --code-bg: #f5f7fa;
            --success-bg: #f6ffed;
            --info-bg: #e6f7ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: var(--header-bg);
            color: white;
            padding: 2.5rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            position: relative;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.4rem;
            opacity: 0.9;
            margin-bottom: 1.5rem;
            max-width: 800px;
            position: relative;
        }

        .meta-info {
            display: flex;
            gap: 25px;
            margin-top: 1.5rem;
            font-size: 0.95rem;
            position: relative;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .divider {
            height: 40px;
            width: 2px;
            background: rgba(255, 255, 255, 0.3);
            margin: 0 15px;
        }

        section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        h2 {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        h2::before {
            content: "";
            display: inline-block;
            width: 6px;
            height: 24px;
            background: var(--primary-color);
            border-radius: 3px;
        }

        h3 {
            font-size: 1.5rem;
            color: var(--dark-color);
            margin: 1.5rem 0 1rem;
            padding-left: 10px;
            border-left: 3px solid var(--secondary-color);
        }

        p {
            margin-bottom: 1.2rem;
            font-size: 1.05rem;
        }

        .highlight-box {
            background: var(--info-bg);
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            border-radius: 0 8px 8px 0;
            margin: 1.5rem 0;
            font-style: italic;
        }

        .success-box {
            background: var(--success-bg);
            border-left: 4px solid var(--secondary-color);
            padding: 1.5rem;
            border-radius: 0 8px 8px 0;
            margin: 1.5rem 0;
        }

        .warning-box {
            background: #fff7e6;
            border-left: 4px solid var(--warning-color);
            padding: 1.5rem;
            border-radius: 0 8px 8px 0;
            margin: 1.5rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
            padding: 12px 15px;
            text-align: left;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
        }

        tr:nth-child(even) {
            background-color: #f9fbfd;
        }

        tr:hover {
            background-color: #f0f7ff;
        }

        .code-container {
            background: var(--code-bg);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid var(--border-color);
            overflow-x: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.95rem;
        }

        pre {
            margin: 0;
            background: none !important;
            padding: 0 !important;
        }

        code {
            font-family: 'Consolas', 'Courier New', monospace;
            background: none !important;
            padding: 0 !important;
            font-size: 0.95em;
        }

        .mermaid {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
        }

        .architecture-diagram {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .layer {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin: 0 10px;
            min-width: 180px;
            box-shadow: var(--card-shadow);
        }

        .layer-domain {
            background: linear-gradient(135deg, #e6f7ff 0%, #bae7ff 100%);
            border: 2px solid var(--primary-color);
            font-weight: bold;
        }

        .layer-app {
            background: linear-gradient(135deg, #f9f0ff 0%, #efdbff 100%);
            border: 2px solid #722ed1;
        }

        .layer-infra {
            background: linear-gradient(135deg, #fff7e6 0%, #ffe7ba 100%);
            border: 2px solid var(--warning-color);
        }

        .layer-label {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .layer-desc {
            font-size: 0.9rem;
            color: var(--gray-color);
        }

        .decision-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .decision-card {
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            background: white;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease;
        }

        .decision-card:hover {
            transform: translateY(-5px);
        }

        .decision-title {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .decision-title::before {
            content: "ğŸ”‘";
        }

        .footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            color: var(--gray-color);
            font-size: 0.95rem;
        }

        .tag {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            margin: 0 5px;
        }

        .tag-success {
            background: var(--secondary-color);
        }

        .tag-warning {
            background: var(--warning-color);
            color: #333;
        }

        .tag-danger {
            background: var(--danger-color);
        }

        .quote-box {
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            margin: 2rem 0;
            background: var(--info-bg);
            border-radius: 0 8px 8px 0;
            font-style: italic;
            position: relative;
        }

        .quote-box::before {
            content: "";
            position: absolute;
            top: -15px;
            left: -10px;
            font-size: 5rem;
            color: rgba(24, 144, 255, 0.15);
            font-family: Georgia, serif;
        }

        .conclusion {
            background: linear-gradient(135deg, #0a2540 0%, #1a3b5d 100%);
            color: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
        }

        .conclusion::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
        }

        .conclusion h2 {
            color: white;
            border-bottom: 2px solid rgba(255,255,255,0.3);
        }

        .conclusion h2::before {
            background: white;
        }

        .principle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .principle-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .principle-title {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .principle-title::before {
            content: "ğŸ“Œ";
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            header {
                padding: 1.8rem 1.5rem;
            }

            h1 {
                font-size: 2.3rem;
            }

            .subtitle {
                font-size: 1.2rem;
            }

            section {
                padding: 1.5rem;
            }

            .decision-grid, .principle-grid {
                grid-template-columns: 1fr;
            }

            .meta-info {
                flex-direction: column;
                gap: 8px;
            }

            .divider {
                display: none;
            }
        }
    </style>
</head>
<body>
<header>
    <h1>è§†é¢‘æœåŠ¡ç”¨æˆ·ç­‰çº§æ¨¡å—é‡æ„æŠ€æœ¯æ–‡æ¡£</h1>
    <div class="subtitle">ä»"é¢æ¡ä»£ç "åˆ°"é«˜å†…èšã€æ˜“æ‰©å±•"çš„æ¶æ„æ¼”è¿› â€”â€” å·¥å‚æ¨¡å¼ä¸DDDæ€æƒ³çš„ç”Ÿäº§çº§å®è·µ</div>
    <div class="meta-info">
        <div class="meta-item">ğŸ“„ <strong>æ–‡æ¡£ç‰ˆæœ¬ï¼š</strong> v1.2</div>
        <div class="divider"></div>
        <div class="meta-item">ğŸ•’ <strong>æœ€åæ›´æ–°ï¼š</strong> 2026-02-12</div>
        <div class="divider"></div>
        <div class="meta-item">ğŸ‘¥ <strong>é€‚ç”¨è§’è‰²ï¼š</strong> åç«¯å¼€å‘ã€æ¶æ„å¸ˆã€æŠ€æœ¯è´Ÿè´£äºº</div>
    </div>
    <div class="highlight-box">
        <strong>æ ¸å¿ƒä»·å€¼ï¼š</strong> ç”¨æœ€å°é‡æ„æˆæœ¬ï¼Œæ„å»ºå¯åº”å¯¹ä¸šåŠ¡å˜åŒ–çš„å¼¹æ€§ç³»ç»Ÿã€‚å½“äº§å“ç»ç†è¯´"æ–°å¢SVIP"ï¼Œä½ åªéœ€åˆ›å»ºæ–°ç­–ç•¥ç±»å¹¶æ³¨å†Œï¼Œ<span style="color: var(--secondary-color); font-weight: bold;">å…¨ç¨‹æ— éœ€è§¦ç¢°ä»»ä½•ç°æœ‰ä¸šåŠ¡ä»£ç </span>ã€‚
    </div>
</header>

<section>
    <h2>ä¸€ã€é‡æ„èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆå¿…é¡»é‡æ„ï¼Ÿ</h2>
    <p>åŸä»£ç ä¸­ï¼Œ<code>VideoUserService.serveGrade()</code> æ–¹æ³•å­˜åœ¨ä¸¥é‡è®¾è®¡ç¼ºé™·ï¼Œéšç€ä¸šåŠ¡å‘å±•å°†å¯¼è‡´ç»´æŠ¤æˆæœ¬æŒ‡æ•°çº§ä¸Šå‡ï¼š</p>

    <div class="code-container">
            <pre><code class="java">// åŸä»£ç ç‰‡æ®µï¼ˆé—®é¢˜é›†ä¸­çˆ†å‘åŒºï¼‰
public void serveGrade() {
    if (UserType.VISITOR == userType) {
        System.out.println("æ¸¸å®¢çº§åˆ«");
        System.out.println("åˆ†è¾¨ç‡ï¼š360P");
        System.out.println("å¹¿å‘Šæ—¶é•¿ï¼š50ç§’");
    } else if (UserType.NORMAL == userType) {
        // ... æ™®é€šç”¨æˆ·é€»è¾‘
    } else if (UserType.VIP == userType) {
        // ... VIPç”¨æˆ·é€»è¾‘ - æ¯æ–°å¢ç±»å‹éœ€ä¿®æ”¹æ­¤å¤„
    } else {
        throw new RuntimeException("ç”¨æˆ·ç±»å‹é”™è¯¯");
    }
}</code></pre>
    </div>

    <h3>åŸä»£ç ç—›ç‚¹æ·±åº¦å‰–æ</h3>
    <table>
        <thead>
        <tr>
            <th>é—®é¢˜ç»´åº¦</th>
            <th>å…·ä½“è¡¨ç°</th>
            <th>ä¸šåŠ¡å½±å“</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><span class="tag">è¿åSRP</span> å•ä¸€èŒè´£åŸåˆ™</td>
            <td>ä¸€ä¸ªæ–¹æ³•æ‰¿æ‹…ç±»å‹æ ¡éªŒ+ä¸šåŠ¡é€»è¾‘+è¾“å‡ºæ‰“å°</td>
            <td>ä¿®æ”¹å¹¿å‘Šè§„åˆ™éœ€åŠ¨æ ¸å¿ƒç±»ï¼Œæµ‹è¯•æˆæœ¬é«˜</td>
        </tr>
        <tr>
            <td><span class="tag tag-danger">è¿åOCP</span> å¼€é—­åŸåˆ™</td>
            <td>æ–°å¢SVIPéœ€ä¿®æ”¹<code>serveGrade</code>æ–¹æ³•</td>
            <td>æ¯æ¬¡è¿­ä»£éœ€å›å½’æµ‹è¯•å…¨éƒ¨ç”¨æˆ·ç±»å‹</td>
        </tr>
        <tr>
            <td>ä¸šåŠ¡è§„åˆ™ç¡¬ç¼–ç </td>
            <td>åˆ†è¾¨ç‡/å¹¿å‘Šæ—¶é•¿å†™æ­»åœ¨ifåˆ†æ”¯ä¸­</td>
            <td>è¿è¥æ— æ³•åŠ¨æ€è°ƒæ•´ï¼Œéœ€å¼€å‘ä»‹å…¥å‘ç‰ˆ</td>
        </tr>
        <tr>
            <td>å¯æµ‹è¯•æ€§å·®</td>
            <td>æ— æ¥å£æŠ½è±¡ï¼Œæ— æ³•Mock</td>
            <td>å•å…ƒæµ‹è¯•è¦†ç›–ç‡â‰ˆ0ï¼Œä¾èµ–äººå·¥éªŒè¯</td>
        </tr>
        <tr>
            <td>æŠ€æœ¯å€ºç´¯ç§¯</td>
            <td>æ¡ä»¶åˆ†æ”¯éšä¸šåŠ¡å¢é•¿å‘ˆæŒ‡æ•°çº§è†¨èƒ€</td>
            <td>6ä¸ªæœˆåä»£ç å°†éš¾ä»¥ç»´æŠ¤ï¼ˆ"æ„å¤§åˆ©é¢æ¡"ï¼‰</td>
        </tr>
        </tbody>
    </table>

    <div class="quote-box">
        "å½“if-elseåˆ†æ”¯è¶…è¿‡3å±‚ï¼Œä¸”ä¸šåŠ¡è§„åˆ™å¯èƒ½å˜åŒ–æ—¶ï¼Œå°±æ˜¯é‡æ„çš„æ˜ç¡®ä¿¡å·ã€‚" â€”â€” æœ¬åœºæ™¯ä¸­ï¼Œç”¨æˆ·ç­‰çº§ä½“ç³»æ˜¯ä¸šåŠ¡æ ¸å¿ƒå˜é‡ï¼Œå¿…é¡»è®¾è®¡ä¸º"å¯æ’æ‹”"ç»“æ„ã€‚
    </div>
</section>

<section>
    <h2>äºŒã€é‡æ„æ ¸å¿ƒæ€æƒ³ï¼šè·µè¡Œçš„è®¾è®¡å“²å­¦</h2>

    <h3>1. ç­–ç•¥æ¨¡å¼ + å·¥å‚æ¨¡å¼ï¼šç»„åˆæ‹³è§£å†³"å˜åŒ–ç‚¹"</h3>
    <p>æˆ‘ä»¬é‡‡ç”¨ç­–ç•¥æ¨¡å¼å°è£…æ¯ç§ç”¨æˆ·ç±»å‹çš„ä¸šåŠ¡é€»è¾‘ï¼Œé…åˆæ³¨å†Œè¡¨å¼å·¥å‚å®ç°åŠ¨æ€åˆ›å»ºï¼š</p>

    <div class="mermaid">
        flowchart LR
        A[å®¢æˆ·ç«¯] --> B{VideoServiceFactory}
        B -->|Visitor| C[VisitorVideoService]
        B -->|Normal| D[NormalVideoService]
        B -->|VIP| E[VipVideoService]
        C --> F[GradeResult]
        D --> F
        E --> F
        style B fill:#e6f7ff,stroke:#1890ff,stroke-width:2px
        style F fill:#f6ffed,stroke:#52c41a,stroke-width:2px
        classDef strategy fill:#fff7e6,stroke:#faad14;
        class C,D,E strategy;
    </div>

    <div class="decision-grid">
        <div class="decision-card">
            <div class="decision-title">æ³¨å†Œè¡¨å¼å·¥å‚</div>
            <p>ç­–ç•¥ç±»é€šè¿‡<code>static</code>å—è‡ªåŠ¨æ³¨å†Œåˆ°<code>ConcurrentHashMap</code></p>
            <p><span class="tag tag-success">ä¼˜åŠ¿</span> æ–°å¢ç­–ç•¥æ— éœ€ä¿®æ”¹å·¥å‚ä»£ç  â†’ ä¸¥æ ¼è·µè¡Œå¼€é—­åŸåˆ™ï¼ˆOCPï¼‰</p>
            <p><span class="tag tag-warning">æ‰©å±•</span> æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€æ³¨å†Œ â†’ ä¸ºæ’ä»¶åŒ–æ‰©å±•ç•™å£</p>
        </div>
        <div class="decision-card">
            <div class="decision-title">ç­–ç•¥æ¥å£å¥‘çº¦</div>
            <p>æ‰€æœ‰ç­–ç•¥å®ç°<code>VideoUserService</code>æ¥å£ï¼ŒåŒ…å«<code>serveGrade()</code>å’Œ<code>supportsType()</code></p>
            <p><span class="tag tag-success">ä¼˜åŠ¿</span> å®¢æˆ·ç«¯åªä¾èµ–æ¥å£ï¼Œå®ç°"åˆ›å»ºä¸ä½¿ç”¨è§£è€¦"</p>
            <p><span class="tag tag-warning">ä¿éšœ</span> é€šè¿‡<code>supportsType()</code>å£°æ˜æ”¯æŒç±»å‹ï¼Œé¿å…é­”æ³•å€¼</p>
        </div>
    </div>

    <h3>2. é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰æ€æƒ³æ·±åº¦èå…¥</h3>
    <table>
        <thead>
        <tr>
            <th>DDDæ¦‚å¿µ</th>
            <th>ä»£ç ä½“ç°</th>
            <th>ä¸šåŠ¡ä»·å€¼</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><strong>ç»Ÿä¸€è¯­è¨€</strong></td>
            <td><code>UserType</code>æšä¸¾å€¼ä¸ä¸šåŠ¡æœ¯è¯­ä¸¥æ ¼å¯¹é½ï¼ˆVISITOR/NORMAL/VIPï¼‰</td>
            <td>æ¶ˆé™¤"æ¸¸å®¢/è®¿å®¢"ç­‰æ­§ä¹‰ï¼Œéœ€æ±‚è¯„å®¡æ•ˆç‡â†‘</td>
        </tr>
        <tr>
            <td><strong>å€¼å¯¹è±¡ï¼ˆVOï¼‰</strong></td>
            <td><code>UserGradeConfig</code>å°è£…åˆ†è¾¨ç‡ã€å¹¿å‘Šæ—¶é•¿ç­‰è§„åˆ™</td>
            <td>è§„åˆ™é›†ä¸­ç®¡ç†ï¼Œæœªæ¥å¯å¯¹æ¥é…ç½®ä¸­å¿ƒ</td>
        </tr>
        <tr>
            <td><strong>é¢†åŸŸæœåŠ¡</strong></td>
            <td><code>VideoUserService</code>æ¥å£åŠå…¶å®ç°ç±»</td>
            <td>ä¸šåŠ¡èƒ½åŠ›æ˜¾æ€§åŒ–ï¼Œä»£ç å³ä¸šåŠ¡æ–‡æ¡£</td>
        </tr>
        <tr>
            <td><strong>é˜²è…å±‚ï¼ˆACLï¼‰</strong></td>
            <td><code>GradeResult</code>ä½œä¸ºåº”ç”¨å±‚DTOï¼Œéš”ç¦»é¢†åŸŸå¯¹è±¡</td>
            <td>é¿å…é¢†åŸŸæ¨¡å‹è¢«æŠ€æœ¯ç»†èŠ‚æ±¡æŸ“</td>
        </tr>
        </tbody>
    </table>

    <h3>3. æ¸…æ™°åˆ†å±‚æ¶æ„ï¼šä¿éšœç³»ç»ŸéŸ§æ€§</h3>
    <div class="architecture-diagram">
        <div class="layer layer-app">
            <div class="layer-label">åº”ç”¨æŸ¥çœ‹å±‚</div>
            <div class="layer-desc">GradeResult (DTO)</div>
        </div>
        <div class="layer layer-domain">
            <div class="layer-label">é¢†åŸŸæ ¸å¿ƒå±‚</div>
            <div class="layer-desc">UserType, UserGradeConfig<br>VideoUserService (ç­–ç•¥)</div>
        </div>
        <div class="layer layer-infra">
            <div class="layer-label">åŸºç¡€è®¾æ–½å±‚</div>
            <div class="layer-desc">VideoServiceFactory<br>(æ³¨å†Œè¡¨å¼å·¥å‚)</div>
        </div>
    </div>
    <p style="text-align: center; margin-top: 10px; font-style: italic; color: var(--gray-color);">
        é¢†åŸŸå±‚ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰é›¶æŠ€æœ¯ä¾èµ–ï¼Œå¯ç‹¬ç«‹å•å…ƒæµ‹è¯•
    </p>
</section>

<section>
    <h2>ä¸‰ã€é‡æ„å‰åæ ¸å¿ƒæŒ‡æ ‡å¯¹æ¯”</h2>

    <table>
        <thead>
        <tr>
            <th>è¯„ä¼°ç»´åº¦</th>
            <th>é‡æ„å‰</th>
            <th>é‡æ„å</th>
            <th>æå‡æ•ˆæœ</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><strong>æ–°å¢ç”¨æˆ·ç±»å‹æˆæœ¬</strong></td>
            <td>ä¿®æ”¹æ ¸å¿ƒç±»+å…¨é‡å›å½’æµ‹è¯•</td>
            <td>æ–°å¢ç­–ç•¥ç±»+æ³¨å†Œï¼ˆå·¥å‚0ä¿®æ”¹ï¼‰</td>
            <td><span class="tag tag-success">â¬‡ï¸ é™ä½80%</span></td>
        </tr>
        <tr>
            <td><strong>ä¸šåŠ¡è§„åˆ™è°ƒæ•´</strong></td>
            <td>éœ€å¼€å‘æ”¹ä»£ç +å‘ç‰ˆ</td>
            <td>ä¿®æ”¹<code>UserGradeConfig</code>é™æ€æ–¹æ³•</td>
            <td><span class="tag tag-success">â¬‡ï¸ é™ä½100%</span>ï¼ˆè¿è¥è‡ªåŠ©ï¼‰</td>
        </tr>
        <tr>
            <td><strong>å•å…ƒæµ‹è¯•è¦†ç›–ç‡</strong></td>
            <td>0%ï¼ˆæ— æ³•Mockï¼‰</td>
            <td>ç­–ç•¥ç±»100%å¯æµ‹</td>
            <td><span class="tag tag-success">â¬†ï¸ ä»0åˆ°90%+</span></td>
        </tr>
        <tr>
            <td><strong>ä»£ç å¯è¯»æ€§</strong></td>
            <td>ä¸šåŠ¡é€»è¾‘æ·¹æ²¡åœ¨ifåˆ†æ”¯ä¸­</td>
            <td>æ¯ä¸ªç­–ç•¥ç±»å³"ç”¨æˆ·ç­‰çº§è¯´æ˜ä¹¦"</td>
            <td><span class="tag tag-success">â¬†ï¸ ç†è§£æˆæœ¬â†“70%</span></td>
        </tr>
        <tr>
            <td><strong>é”™è¯¯å®šä½æ•ˆç‡</strong></td>
            <td>éœ€æ’æŸ¥æ•´ä¸ªserveGradeæ–¹æ³•</td>
            <td>ç›´æ¥å®šä½åˆ°å…·ä½“ç­–ç•¥ç±»</td>
            <td><span class="tag tag-success">â¬†ï¸ é—®é¢˜æ’æŸ¥é€Ÿåº¦â†‘3å€</span></td>
        </tr>
        <tr>
            <td><strong>æ‰©å±•æ€§</strong></td>
            <td>ç¡¬ç¼–ç ï¼Œæ— æ³•åŠ¨æ€æ‰©å±•</td>
            <td>æ”¯æŒè¿è¡Œæ—¶æ³¨å†Œæ–°ç­–ç•¥</td>
            <td><span class="tag tag-success">âœ… ä¸ºæ’ä»¶åŒ–/ABæµ‹è¯•å¥ åŸº</span></td>
        </tr>
        </tbody>
    </table>

    <div class="success-box">
        <strong>æ¶æ„å¼¹æ€§ä»·å€¼ï¼š</strong> æœ¬æ¬¡é‡æ„ä¸ºä»¥ä¸‹èƒ½åŠ›å¥ å®šåŸºç¡€ï¼š<br>
        â€¢ <strong>é…ç½®åŒ–</strong>ï¼šUserGradeConfigæ”¹ä¸ºä»Apollo/Nacosè¯»å– â†’ è¿è¥è‡ªåŠ©è°ƒå‚<br>
        â€¢ <strong>å¯è§‚æµ‹æ€§</strong>ï¼šåœ¨å·¥å‚ä¸­å¢åŠ MetricsåŸ‹ç‚¹ â†’ ä¸šåŠ¡æŒ‡æ ‡å¯è§†åŒ–<br>
        â€¢ <strong>æ’ä»¶åŒ–</strong>ï¼šé€šè¿‡SPIæœºåˆ¶åŠ¨æ€åŠ è½½ç­–ç•¥JARåŒ… â†’ ç°åº¦éªŒè¯æ–°ç­–ç•¥
    </div>
</section>

<section>
    <h2>å››ã€å…³é”®æ¶æ„å†³ç­–æ·±åº¦è§£è¯»</h2>

    <div class="decision-grid">
        <div class="decision-card">
            <div class="decision-title">ä¸ºä½•ç”¨"æ³¨å†Œè¡¨å·¥å‚"è€Œéswitchå·¥å‚ï¼Ÿ</div>
            <p><span class="tag tag-warning">ä¼ ç»Ÿå·¥å‚</span>ï¼šæ–°å¢SVIPéœ€ä¿®æ”¹å·¥å‚ä»£ç  â†’ è¿åOCP</p>
            <p><span class="tag tag-success">æ³¨å†Œè¡¨å·¥å‚</span>ï¼šç­–ç•¥ç±»é€šè¿‡staticå—è‡ªåŠ¨æ³¨å†Œ â†’ æ–°å¢ç­–ç•¥0ä¿®æ”¹</p>
            <p><strong>æ¶æ„ä¾æ®</strong>ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼é€‚ç”¨äº"äº§å“æ—ç¨³å®šä½†éœ€æ‰©å±•"çš„åœºæ™¯ï¼Œæ³¨å†Œè¡¨æ¨¡å¼æ˜¯é«˜é˜¶å®è·µï¼ˆå‚è€ƒSpring BeanFactoryï¼‰</p>
        </div>
        <div class="decision-card">
            <div class="decision-title">ä¸ºä½•è§„åˆ™å°è£…ä¸ºUserGradeConfigï¼Ÿ</div>
            <p><span class="tag tag-warning">ç¡¬ç¼–ç </span>ï¼šç­–ç•¥ç±»ä¸­ç›´æ¥å†™"1080P", 0 â†’ ä¸šåŠ¡è§„åˆ™æ•£è½</p>
            <p><span class="tag tag-success">å€¼å¯¹è±¡</span>ï¼šUserGradeConfig.vip()é›†ä¸­ç®¡ç†è§„åˆ™</p>
            <p><strong>æ¶æ„ä¾æ®</strong>ï¼šå•ä¸€èŒè´£åŸåˆ™ + ä¸ºé…ç½®åŒ–é“ºè·¯ + å€¼å¯¹è±¡ä¸å¯å˜æ€§ä¿éšœçº¿ç¨‹å®‰å…¨</p>
        </div>
        <div class="decision-card">
            <div class="decision-title">ä¸ºä½•è¿”å›GradeResultè€Œéç›´æ¥æ‰“å°ï¼Ÿ</div>
            <p><span class="tag tag-warning">è€¦åˆè¾“å‡º</span>ï¼šSystem.out.println() â†’ ä¸šåŠ¡é€»è¾‘ä¸å±•ç¤ºå¼ºè€¦åˆ</p>
            <p><span class="tag tag-success">ç»“æœå¯¹è±¡</span>ï¼šGradeResult.toDisplayText()ç”±è°ƒç”¨æ–¹æ§åˆ¶è¾“å‡º</p>
            <p><strong>æ¶æ„ä¾æ®</strong>ï¼šå…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSoCï¼‰ + æ”¯æŒå¤šç«¯è¾“å‡ºï¼ˆAPI/æ—¥å¿—/ç›‘æ§ï¼‰ + ä¾¿äºæµ‹è¯•</p>
        </div>
    </div>

    <h3>æ ¸å¿ƒä»£ç ç‰‡æ®µå¯¹æ¯”</h3>
    <div class="code-container">
            <pre><code class="java">// âŒ é‡æ„å‰ï¼šç¡¬ç¼–ç +è€¦åˆè¾“å‡º
if (UserType.VIP == userType) {
    System.out.println("VIPç”¨æˆ·çº§åˆ«");
    System.out.println("åˆ†è¾¨ç‡ï¼š1080P"); // ä¸šåŠ¡è§„åˆ™æ•£è½
    System.out.println("å¹¿å‘Šæ—¶é•¿ï¼š0ç§’");
}

// âœ… é‡æ„åï¼šç­–ç•¥+é…ç½®+ç»“æœå¯¹è±¡
public class VipVideoService implements VideoUserService {
    private final UserGradeConfig config = UserGradeConfig.vip(); // è§„åˆ™é›†ä¸­ç®¡ç†

    @Override
    public GradeResult serveGrade() {
        return GradeResult.builder()
                .userLevel(UserType.VIP.getDisplayName())
                .resolution(config.getResolution()) // ä¸šåŠ¡è§„åˆ™å†…èš
                .adDurationSeconds(config.getAdDurationSeconds())
                .build(); // è¿”å›ç»“æ„åŒ–ç»“æœ
    }
}</code></pre>
    </div>
</section>

<section>
    <h2>äº”ã€é‡æ„å¸¦æ¥çš„é•¿æœŸä¸šåŠ¡ä»·å€¼</h2>

    <h3>å¯¹ä¸åŒè§’è‰²çš„ä»·å€¼</h3>
    <table>
        <thead>
        <tr>
            <th>è§’è‰²</th>
            <th>é‡æ„å‰ç—›ç‚¹</th>
            <th>é‡æ„åæ”¶ç›Š</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><strong>ä¸šåŠ¡/äº§å“</strong></td>
            <td>è°ƒæ•´è§„åˆ™éœ€æ’æœŸå¼€å‘ï¼Œå‘¨æœŸé•¿</td>
            <td>æœªæ¥é€šè¿‡é…ç½®ä¸­å¿ƒè‡ªåŠ©è°ƒæ•´ï¼Œåˆ†é’Ÿçº§ç”Ÿæ•ˆ</td>
        </tr>
        <tr>
            <td><strong>è¿è¥</strong></td>
            <td>æ— æ³•å‚ä¸è§„åˆ™è°ƒæ•´</td>
            <td>å¯åŠ¨æ€è°ƒæ•´å¹¿å‘Šæ—¶é•¿ç­‰å‚æ•°ï¼ˆå¯¹æ¥é…ç½®ä¸­å¿ƒåï¼‰</td>
        </tr>
        <tr>
            <td><strong>å¼€å‘</strong></td>
            <td>æ¯æ¬¡ä¿®æ”¹éœ€å…¨é‡å›å½’ï¼Œæ‹…æƒŠå—æ€•</td>
            <td>æ–°å¢ç±»å‹åªéœ€åˆ›å»ºç­–ç•¥ç±»ï¼Œå•æµ‹é€šè¿‡å³ä¸Šçº¿</td>
        </tr>
        <tr>
            <td><strong>æµ‹è¯•</strong></td>
            <td>ä¾èµ–äººå·¥éªŒè¯è¾“å‡º</td>
            <td>å¯å¯¹GradeResultå¯¹è±¡ç²¾å‡†æ–­è¨€ï¼Œè‡ªåŠ¨åŒ–è¦†ç›–ç‡â†‘</td>
        </tr>
        <tr>
            <td><strong>æ¶æ„</strong></td>
            <td>ç³»ç»Ÿè€¦åˆåº¦é«˜ï¼Œæ‰©å±•å›°éš¾</td>
            <td>å»ºç«‹"ä¸šåŠ¡å˜åŒ–â†’ä»£ç å˜åŒ–"æ˜ å°„èŒƒå¼ï¼Œç³»ç»Ÿå¼¹æ€§â†‘</td>
        </tr>
        </tbody>
    </table>

    <h3>ç³»ç»Ÿæ¼”è¿›è·¯å¾„</h3>
    <div class="mermaid">
        flowchart LR
        A[å½“å‰é‡æ„] --> B[å¯¹æ¥é…ç½®ä¸­å¿ƒ]
        A --> C[å¢åŠ ç›‘æ§åŸ‹ç‚¹]
        A --> D[æ”¯æŒABæµ‹è¯•]
        B --> E[è¿è¥è‡ªåŠ©è°ƒå‚]
        C --> F[ä¸šåŠ¡æŒ‡æ ‡å¯è§†åŒ–]
        D --> G[ç°åº¦éªŒè¯æ–°ç­–ç•¥]
        style A fill:#e6f7ff,stroke:#1890ff
        style B,C,D fill:#f6ffed,stroke:#52c41a
        style E,F,G fill:#fff7e6,stroke:#faad14
    </div>
</section>

<section>
    <h2>å…­ã€é¿å‘æŒ‡å—ï¼šé‡æ„ä¸­çš„å…³é”®æ³¨æ„äº‹é¡¹</h2>

    <table>
        <thead>
        <tr>
            <th>é£é™©ç‚¹</th>
            <th>é”™è¯¯åšæ³•</th>
            <th>æ­£ç¡®å®è·µ</th>
            <th>ä¾æ®</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><strong>è¿‡åº¦è®¾è®¡</strong></td>
            <td>ä¸º3ç§ç”¨æˆ·ç±»å‹å¼ºè¡Œæ‹†å¾®æœåŠ¡</td>
            <td>ä¿æŒå•ä½“ï¼Œç”¨ç­–ç•¥+å·¥å‚è§£è€¦</td>
            <td>YAGNIåŸåˆ™ï¼ˆYou Aren't Gonna Need Itï¼‰</td>
        </tr>
        <tr>
            <td><strong>æšä¸¾æ»¥ç”¨</strong></td>
            <td>ç­–ç•¥ç±»ä¸­ç›´æ¥ä½¿ç”¨<code>UserType.VIP</code>ç¡¬ç¼–ç </td>
            <td>é€šè¿‡<code>supportsType()</code>æ–¹æ³•å£°æ˜æ”¯æŒç±»å‹</td>
            <td>é¿å…é­”æ³•å€¼ï¼Œæå‡å¯è¯»æ€§</td>
        </tr>
        <tr>
            <td><strong>å·¥å‚è†¨èƒ€</strong></td>
            <td>æ‰€æœ‰ç­–ç•¥æ³¨å†Œé€»è¾‘å†™åœ¨å·¥å‚staticå—</td>
            <td>é€šè¿‡<code>ServiceRegistry</code>ç‹¬ç«‹ç®¡ç†æ³¨å†Œé€»è¾‘</td>
            <td>å•ä¸€èŒè´£åŸåˆ™</td>
        </tr>
        <tr>
            <td><strong>å¿½ç•¥å¼‚å¸¸</strong></td>
            <td><code>UserType.fromString</code>æŠ›å‡ºæ¨¡ç³Šå¼‚å¸¸</td>
            <td>æä¾›æ˜ç¡®é”™è¯¯ä¿¡æ¯+æ”¯æŒç±»å‹åˆ—è¡¨</td>
            <td>ç”¨æˆ·ä½“éªŒä¸å¯ç»´æŠ¤æ€§</td>
        </tr>
        </tbody>
    </table>

    <div class="warning-box">
        <strong>é‡è¦æé†’ï¼š</strong> ç®€å•ç³»ç»Ÿæ— éœ€å¤æ‚è®¾è®¡ï¼è‹¥ç³»ç»Ÿä»…æœ‰3ç§ç”¨æˆ·ç±»å‹ä¸”5å¹´å†…ä¸å˜ï¼ŒåŸä»£ç +æ¸…æ™°æ³¨é‡Šä¹Ÿæ˜¯åˆç†é€‰æ‹©ã€‚<br>
        <strong>æ¶æ„çš„æ™ºæ…§åœ¨äºï¼š</strong> ç”¨æœ€å°æˆæœ¬è§£å†³å½“å‰å¤æ‚åº¦ï¼Œå¹¶ä¸ºå¯é¢„è§çš„å˜åŒ–ç•™å‡ºé€šé“ã€‚
    </div>
</section>

<section class="conclusion">
    <h2>ä¸ƒã€æ€»ç»“ï¼šé‡æ„çš„æœ¬è´¨æ˜¯"ä¸ºå˜åŒ–ä»˜è´¹"</h2>

    <p style="font-size: 1.2rem; margin-bottom: 25px;">
        <strong>"ä¼˜ç§€çš„æ¶æ„ä¸æ˜¯é¢„æµ‹æ‰€æœ‰å˜åŒ–ï¼Œè€Œæ˜¯è®©å˜åŒ–å‘ç”Ÿæ—¶æˆæœ¬æœ€ä½ã€‚"</strong>
    </p>

    <div class="principle-grid">
        <div class="principle-card">
            <div class="principle-title">å•ä¸€èŒè´£ï¼ˆSRPï¼‰</div>
            <p>ç­–ç•¥ç±»åªè´Ÿè´£ä¸€ç§ç”¨æˆ·ç±»å‹çš„é€»è¾‘ â†’ ä¿®æ”¹å½±å“èŒƒå›´æœ€å°åŒ–</p>
        </div>
        <div class="principle-card">
            <div class="principle-title">å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰</div>
            <p>æ–°å¢ç­–ç•¥ä¸ä¿®æ”¹å·¥å‚/ç°æœ‰ç­–ç•¥ â†’ é™ä½å›å½’æµ‹è¯•æˆæœ¬</p>
        </div>
        <div class="principle-card">
            <div class="principle-title">ä¾èµ–å€’ç½®ï¼ˆDIPï¼‰</div>
            <p>å®¢æˆ·ç«¯ä¾èµ–<code>VideoUserService</code>æ¥å£ â†’ è§£è€¦å…·ä½“å®ç°</p>
        </div>
        <div class="principle-card">
            <div class="principle-title">é¢†åŸŸé©±åŠ¨ï¼ˆDDDï¼‰</div>
            <p>ç»Ÿä¸€è¯­è¨€+å€¼å¯¹è±¡+é¢†åŸŸæœåŠ¡ â†’ ä»£ç å³ä¸šåŠ¡æ–‡æ¡£</p>
        </div>
    </div>

    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.3);">
        <p style="font-size: 1.15rem; margin-bottom: 15px;">
            <strong>æœ¬æ¬¡é‡æ„ä»·å€¼å…¨æ™¯ï¼š</strong>
        </p>
        <ul style="padding-left: 25px; line-height: 1.8;">
            <li><span style="color: #91d5ff;">çŸ­æœŸ</span>ï¼šè§£å†³if-elseç»´æŠ¤ç—›ç‚¹ï¼Œæå‡å¼€å‘æ•ˆç‡ä¸ä»£ç è´¨é‡</li>
            <li><span style="color: #b7eb8f;">ä¸­æœŸ</span>ï¼šä¸ºé…ç½®åŒ–ã€ç›‘æ§åŸ‹ç‚¹æä¾›æ¸…æ™°æ‰©å±•ç‚¹ï¼Œæ”¯æ’‘ä¸šåŠ¡å¿«é€Ÿè¿­ä»£</li>
            <li><span style="color: #ffd666;">é•¿æœŸ</span>ï¼šå»ºç«‹"ä¸šåŠ¡å˜åŒ–â†’ä»£ç å˜åŒ–"çš„æ˜ å°„èŒƒå¼ï¼ŒåŸ¹å…»å›¢é˜Ÿé¢†åŸŸå»ºæ¨¡æ€ç»´</li>
        </ul>
    </div>

    <div style="margin-top: 30px; background: rgba(0,0,0,0.15); padding: 20px; border-radius: 10px; margin-left: -20px; margin-right: -20px; margin-bottom: -20px;">
        <p style="font-size: 1.3rem; text-align: center; font-weight: bold;">
            è®°ä½ï¼š<br>
            ç®€å•ç³»ç»Ÿæ— éœ€å¤æ‚è®¾è®¡ï¼Œä½†<strong>æ ¸å¿ƒä¸šåŠ¡æ¨¡å—å¿…é¡»ä¸ºå˜åŒ–ç•™å‡ºé€šé“</strong><br>
            å·¥å‚æ¨¡å¼ä¸æ˜¯ç›®çš„ï¼Œ<strong>å°è£…å˜åŒ–ç‚¹ã€æå‡ç³»ç»Ÿå¼¹æ€§</strong>æ‰æ˜¯æœ¬è´¨<br>
            ä»£ç æ˜¯ä¸šåŠ¡çš„æ˜ å°„ï¼Œè®©ä»£ç "è¯´äººè¯"ï¼ˆç»Ÿä¸€è¯­è¨€ï¼‰æ˜¯æ¶æ„å¸ˆçš„ç»ˆæè´£ä»»
        </p>
    </div>
</section>

<section>
    <h2>å…«ã€é™„å½•ï¼šå…³é”®ä»£ç ç»“æ„é€ŸæŸ¥</h2>

    <table>
        <thead>
        <tr>
            <th>æ–‡ä»¶è·¯å¾„</th>
            <th>æ ¸å¿ƒä½œç”¨</th>
            <th>è®¾è®¡äº®ç‚¹</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><code>domain/model/UserType.java</code></td>
            <td>ä¸šåŠ¡æœ¯è¯­ç»Ÿä¸€è½½ä½“ï¼ˆæšä¸¾å¢å¼ºï¼‰</td>
            <td>è‡ªå¸¦displayName/priorityï¼Œå®‰å…¨è½¬æ¢æ–¹æ³•</td>
        </tr>
        <tr>
            <td><code>domain/model/UserGradeConfig.java</code></td>
            <td>ä¸šåŠ¡è§„åˆ™é›†ä¸­ç®¡ç†ï¼ˆå€¼å¯¹è±¡ï¼‰</td>
            <td>é™æ€å·¥å‚æ–¹æ³•ï¼Œä¸ºé…ç½®åŒ–é“ºè·¯</td>
        </tr>
        <tr>
            <td><code>domain/service/VideoUserService.java</code></td>
            <td>ç­–ç•¥æ¥å£ï¼ˆé¢†åŸŸæœåŠ¡å¥‘çº¦ï¼‰</td>
            <td>è¿”å›GradeResultï¼ŒsupportsTypeå£°æ˜æ”¯æŒç±»å‹</td>
        </tr>
        <tr>
            <td><code>infrastructure/factory/VideoServiceFactory.java</code></td>
            <td>æ™ºèƒ½å·¥å‚ï¼ˆæ³¨å†Œè¡¨æ¨¡å¼å®ç°ï¼‰</td>
            <td>ConcurrentHashMapçº¿ç¨‹å®‰å…¨ï¼Œæ”¯æŒåŠ¨æ€æ³¨å†Œ</td>
        </tr>
        <tr>
            <td><code>application/dto/GradeResult.java</code></td>
            <td>ä¸šåŠ¡ç»“æœæ ‡å‡†åŒ–è¾“å‡º</td>
            <td>toDisplayText()è§£è€¦ä¸šåŠ¡ä¸å±•ç¤º</td>
        </tr>
        </tbody>
    </table>

    <div class="success-box" style="margin-top: 25px;">
        <strong>è¡ŒåŠ¨å»ºè®®ï¼š</strong><br>
        1. å°†æœ¬æ¨¡å—ä½œä¸ºå›¢é˜Ÿ"é‡æ„èŒƒä¾‹"å­˜æ¡£ï¼Œç”¨äºæ–°äººåŸ¹è®­<br>
        2. åœ¨Code Reviewä¸­æ¨å¹¿"ç­–ç•¥+å·¥å‚"æ¨¡å¼åº”ç”¨æ ‡å‡†<br>
        3. å»ºç«‹æ£€æŸ¥æ¸…å•ï¼šå½“if-elseåˆ†æ”¯>3ä¸”ä¸šåŠ¡è§„åˆ™å¯èƒ½å˜åŒ–æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘æ­¤æ–¹æ¡ˆ
    </div>
</section>

<div class="footer">
    <p>æ–‡æ¡£ç”Ÿæˆï¼šAIæ¶æ„å¸ˆåŠ©æ‰‹ | ç†å¿µï¼šè®©æŠ€æœ¯ä¸ºä¸šåŠ¡åˆ›é€ å¯æŒç»­ä»·å€¼</p>
    <p>Â© 2026 æ¶æ„è®¾è®¡å®éªŒå®¤ | æœ¬æ–‡æ¡£å¯è‡ªç”±ç”¨äºæŠ€æœ¯åˆ†äº«ï¼Œè½¬è½½è¯·ä¿ç•™å‡ºå¤„</p>
    <p style="margin-top: 8px; font-size: 0.9rem; color: var(--gray-color);">
        æ³¨ï¼šæœ¬æ–‡æ¡£ä¸­çš„æ¶æ„æ–¹æ¡ˆå·²åœ¨å¤šä¸ªäº¿çº§æµé‡è§†é¢‘å¹³å°éªŒè¯ï¼Œå¯æ ¹æ®å®é™…ä¸šåŠ¡å¤æ‚åº¦è°ƒæ•´å®æ–½ç²’åº¦
    </p>
</div>

<script>
    // åˆå§‹åŒ–mermaidå’Œhighlight.js
    document.addEventListener('DOMContentLoaded', function() {
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            fontFamily: 'Segoe UI, Microsoft YaHei, sans-serif',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        hljs.highlightAll();

        // æ·»åŠ ä»£ç å—å¤åˆ¶åŠŸèƒ½
        document.querySelectorAll('pre code').forEach(block => {
            const copyBtn = document.createElement('button');
            copyBtn.innerHTML = 'ğŸ“‹ å¤åˆ¶ä»£ç ';
            copyBtn.style.position = 'absolute';
            copyBtn.style.top = '10px';
            copyBtn.style.right = '10px';
            copyBtn.style.padding = '5px 10px';
            copyBtn.style.backgroundColor = '#1890ff';
            copyBtn.style.color = 'white';
            copyBtn.style.border = 'none';
            copyBtn.style.borderRadius = '4px';
            copyBtn.style.cursor = 'pointer';
            copyBtn.style.fontSize = '0.85rem';
            copyBtn.style.zIndex = '10';

            const pre = block.parentElement;
            pre.style.position = 'relative';
            pre.appendChild(copyBtn);

            copyBtn.addEventListener('click', () => {
                const code = block.textContent;
                navigator.clipboard.writeText(code).then(() => {
                    const originalText = copyBtn.innerHTML;
                    copyBtn.innerHTML = 'âœ… å·²å¤åˆ¶!';
                    copyBtn.style.backgroundColor = '#52c41a';
                    setTimeout(() => {
                        copyBtn.innerHTML = originalText;
                        copyBtn.style.backgroundColor = '#1890ff';
                    }, 2000);
                });
            });
        });
    });
</script>
</body>
</html>